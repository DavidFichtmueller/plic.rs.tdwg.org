# Test notes

1. In the test implementation, the source data are from the "test" branch of the rs.tdwg.org repo.  The source data in the master branch have not been modified.  Essentially every instance of "http://rs.tdwg.org/" in the data has been changed to "http://rs-test.tdwg.org/".
2. To minimize the necessity to make hard-coded changes in the restxq.xqm server script, the functions page:subdomain() gets the subdomain value (http://rs.tdwg.org/ or http://rs-test.tdwg.org/) from the file subdomain.txt in the master directory.   The function page:branch() gets the branch name (master or test) from the file branch.txt in the master directory.  The value in these two files can be changed to switch between the test subdomain and the real subsomain.
3. Because the html namespace must be declared in the prolog of restxq.xqm, the html.xqm module used to generate the html pages must be retrieved from from the master branch, rather than the test branch, because its retrieval URL has to be hard-coded in server script.  So changes made to html.xq in the test branch will have no effect on the human-readable representations; all changes must be made to html.xq in the master branch regardless of the branch used as the data source.  There is no place in html.xqm where either the subdomain nor the branch is hard-coded (except for the subdomain.txt and branch.txt files, which as stated above are in the master directory).
4. Once the system is in place, to switch back from the test to the real subdomain can be controlled entirely by changing the values in the subdomain.txt and branch.txt files. 
